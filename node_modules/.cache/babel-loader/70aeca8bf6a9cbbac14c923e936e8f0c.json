{"ast":null,"code":"import _toConsumableArray from\"/Users/liliia/Downloads/demo-social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/liliia/Downloads/demo-social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{usersAPI}from'../api/api';var TOGGLE_FOLLOW='TOGGLE_FOLLOW';var SET_USERS='SET_USERS';var SET_USERS_TOTAL_COUNT='SET_USERS_TOTAL_COUNT';var SET_USERLIST_CURRENT_PAGE='SET_USERLIST_CURRENT_PAGE';var SHOW_PRELOADER='SHOW_PRELOADER';var TOGGLE_DISABLED_FOLLOWING_BUTTON='TOGGLE_DISABLED_FOLLOWING_BUTTON';var initialState={users:[],usersTotalCount:0,userListPageSize:10,userListCurrentPage:1,isShowPreloader:false,disabledUserListFollowButton:[]};var usersReducer=function usersReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case TOGGLE_FOLLOW:return _objectSpread(_objectSpread({},state),{},{users:state.users.map(function(u){if(u.id===action.userID){return _objectSpread(_objectSpread({},u),{},{followed:!u.followed});}return u;})});case SET_USERS:return _objectSpread(_objectSpread({},state),{},{users:action.users// to render only for new users\n// users: [...state.users, ...action.users], // to add new users in the end\n});case SET_USERS_TOTAL_COUNT:return _objectSpread(_objectSpread({},state),{},{usersTotalCount:action.totalCount});case SET_USERLIST_CURRENT_PAGE:return _objectSpread(_objectSpread({},state),{},{userListCurrentPage:action.pageNumber});case SHOW_PRELOADER:return _objectSpread(_objectSpread({},state),{},{isShowPreloader:action.isShow});case TOGGLE_DISABLED_FOLLOWING_BUTTON:return _objectSpread(_objectSpread({},state),{},{disabledUserListFollowButton:action.isDisabled?[].concat(_toConsumableArray(state.disabledUserListFollowButton),[action.userId]):state.disabledUserListFollowButton.filter(function(id){return id!==action.userId;})});default:return state;}};export var onToggleFollowClick=function onToggleFollowClick(userID){return{type:TOGGLE_FOLLOW,userID:userID};};export var setUsers=function setUsers(users){return{type:SET_USERS,users:users};};export var setUsersTotalCount=function setUsersTotalCount(totalCount){return{type:SET_USERS_TOTAL_COUNT,totalCount:totalCount};};export var setUserListCurrentPage=function setUserListCurrentPage(pageNumber){return{type:SET_USERLIST_CURRENT_PAGE,pageNumber:pageNumber};};export var showPreloader=function showPreloader(isShow){return{type:SHOW_PRELOADER,isShow:isShow};};export var toggleDisabledFollowingButton=function toggleDisabledFollowingButton(isDisabled,userId){return{type:TOGGLE_DISABLED_FOLLOWING_BUTTON,isDisabled:isDisabled,userId:userId};};export var getUserListThunkCreator=function getUserListThunkCreator(userListCurrentPage,userListPageSize){return function(dispatch){dispatch(setUserListCurrentPage(userListCurrentPage));dispatch(showPreloader(true));usersAPI.getUserListRequest(userListCurrentPage,userListPageSize).then(function(data){dispatch(showPreloader(false));dispatch(setUsers(data.items));dispatch(setUsersTotalCount(data.totalCount));});};};export var unfollow=function unfollow(userId){return function(dispatch){dispatch(toggleDisabledFollowingButton(true,userId));usersAPI.unfollowRequest(userId).then(function(data){if(data.resultCode===0){dispatch(onToggleFollowClick(userId));}dispatch(toggleDisabledFollowingButton(false,userId));});};};export var follow=function follow(userId){return function(dispatch){dispatch(toggleDisabledFollowingButton(true,userId));usersAPI.followRequest(userId).then(function(data){if(data.resultCode===0){dispatch(onToggleFollowClick(userId));}dispatch(toggleDisabledFollowingButton(false,userId));});};};export default usersReducer;","map":{"version":3,"sources":["/Users/liliia/Downloads/demo-social-network/src/Redux/usersReducer.js"],"names":["usersAPI","TOGGLE_FOLLOW","SET_USERS","SET_USERS_TOTAL_COUNT","SET_USERLIST_CURRENT_PAGE","SHOW_PRELOADER","TOGGLE_DISABLED_FOLLOWING_BUTTON","initialState","users","usersTotalCount","userListPageSize","userListCurrentPage","isShowPreloader","disabledUserListFollowButton","usersReducer","state","action","type","map","u","id","userID","followed","totalCount","pageNumber","isShow","isDisabled","userId","filter","onToggleFollowClick","setUsers","setUsersTotalCount","setUserListCurrentPage","showPreloader","toggleDisabledFollowingButton","getUserListThunkCreator","dispatch","getUserListRequest","then","data","items","unfollow","unfollowRequest","resultCode","follow","followRequest"],"mappings":"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","sourcesContent":["import { usersAPI } from '../api/api';\n\nconst TOGGLE_FOLLOW = 'TOGGLE_FOLLOW';\nconst SET_USERS = 'SET_USERS';\nconst SET_USERS_TOTAL_COUNT = 'SET_USERS_TOTAL_COUNT';\nconst SET_USERLIST_CURRENT_PAGE = 'SET_USERLIST_CURRENT_PAGE';\nconst SHOW_PRELOADER = 'SHOW_PRELOADER';\nconst TOGGLE_DISABLED_FOLLOWING_BUTTON = 'TOGGLE_DISABLED_FOLLOWING_BUTTON';\n\nlet initialState = {\n  users: [],\n  usersTotalCount: 0,\n  userListPageSize: 10,\n  userListCurrentPage: 1,\n  isShowPreloader: false,\n  disabledUserListFollowButton: [],\n}\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n\n    case TOGGLE_FOLLOW:\n      return {\n        ...state,\n        users: state.users.map(u => {\n          if (u.id === action.userID) {\n            return {\n              ...u,\n              followed: !u.followed,\n            }\n          }\n          return u;\n        }),\n      }\n    case SET_USERS:\n      return {\n        ...state,\n        users: action.users, // to render only for new users\n        // users: [...state.users, ...action.users], // to add new users in the end\n      }\n\n    case SET_USERS_TOTAL_COUNT:\n      return {\n        ...state,\n        usersTotalCount: action.totalCount,\n      }\n\n    case SET_USERLIST_CURRENT_PAGE:\n      return {\n        ...state,\n        userListCurrentPage: action.pageNumber,\n      }\n    case SHOW_PRELOADER:\n      return {\n        ...state,\n        isShowPreloader: action.isShow,\n      }\n    case TOGGLE_DISABLED_FOLLOWING_BUTTON:\n      return {\n        ...state,\n        disabledUserListFollowButton: action.isDisabled\n          ? [...state.disabledUserListFollowButton, action.userId]\n          : state.disabledUserListFollowButton.filter(id => id !== action.userId),\n      }\n    default:\n      return state;\n  }\n}\n\nexport const onToggleFollowClick = (userID) => ({ type: TOGGLE_FOLLOW, userID });\nexport const setUsers = (users) => ({ type: SET_USERS, users });\nexport const setUsersTotalCount = (totalCount) => ({ type: SET_USERS_TOTAL_COUNT, totalCount });\nexport const setUserListCurrentPage = (pageNumber) => ({ type: SET_USERLIST_CURRENT_PAGE, pageNumber });\nexport const showPreloader = (isShow) => ({ type: SHOW_PRELOADER, isShow });\nexport const toggleDisabledFollowingButton = (isDisabled, userId) => ({ type: TOGGLE_DISABLED_FOLLOWING_BUTTON, isDisabled, userId });\n\nexport const getUserListThunkCreator = (userListCurrentPage, userListPageSize) => {\n  return (dispatch) => {\n    dispatch(setUserListCurrentPage(userListCurrentPage));\n    dispatch(showPreloader(true));\n    usersAPI.getUserListRequest(userListCurrentPage, userListPageSize)\n      .then(data => {\n        dispatch(showPreloader(false));\n        dispatch(setUsers(data.items));\n        dispatch(setUsersTotalCount(data.totalCount));\n      });\n  }\n};\nexport const unfollow = (userId) => {\n  return (dispatch) => {\n    dispatch(toggleDisabledFollowingButton(true, userId));\n\n    usersAPI.unfollowRequest(userId)\n        .then(data => {\n            if (data.resultCode === 0) {\n              dispatch(onToggleFollowClick(userId));\n            }\n            dispatch(toggleDisabledFollowingButton(false, userId));\n        });\n  }\n};\nexport const follow = (userId) => {\n  return (dispatch) => {\n    dispatch(toggleDisabledFollowingButton(true, userId));\n\n    usersAPI.followRequest(userId)\n        .then(data => {\n            if (data.resultCode === 0) {\n              dispatch(onToggleFollowClick(userId));\n            }\n            dispatch(toggleDisabledFollowingButton(false, userId));\n        });\n  }\n};\n\nexport default usersReducer;\n\n"]},"metadata":{},"sourceType":"module"}
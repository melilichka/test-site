{"ast":null,"code":"import { usersAPI } from '../api/api';\nconst TOGGLE_FOLLOW = 'TOGGLE_FOLLOW';\nconst SET_USERS = 'SET_USERS';\nconst SET_USERS_TOTAL_COUNT = 'SET_USERS_TOTAL_COUNT';\nconst SET_USERLIST_CURRENT_PAGE = 'SET_USERLIST_CURRENT_PAGE';\nconst SHOW_PRELOADER = 'SHOW_PRELOADER';\nconst TOGGLE_DISABLED_FOLLOWING_BUTTON = 'TOGGLE_DISABLED_FOLLOWING_BUTTON';\nlet initialState = {\n  users: [],\n  usersTotalCount: 0,\n  userListPageSize: 10,\n  userListCurrentPage: 1,\n  isShowPreloader: false,\n  disabledUserListFollowButton: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case TOGGLE_FOLLOW:\n      return { ...state,\n        users: state.users.map(u => {\n          if (u.id === action.userID) {\n            return { ...u,\n              followed: !u.followed\n            };\n          }\n\n          return u;\n        })\n      };\n\n    case SET_USERS:\n      return { ...state,\n        users: action.users // to render only for new users\n        // users: [...state.users, ...action.users], // to add new users in the end\n\n      };\n\n    case SET_USERS_TOTAL_COUNT:\n      return { ...state,\n        usersTotalCount: action.totalCount\n      };\n\n    case SET_USERLIST_CURRENT_PAGE:\n      return { ...state,\n        userListCurrentPage: action.pageNumber\n      };\n\n    case SHOW_PRELOADER:\n      return { ...state,\n        isShowPreloader: action.isShow\n      };\n\n    case TOGGLE_DISABLED_FOLLOWING_BUTTON:\n      return { ...state,\n        disabledUserListFollowButton: action.isDisabled ? [...state.disabledUserListFollowButton, action.userId] : state.disabledUserListFollowButton.filter(id => id !== action.userId)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const onToggleFollowClick = userID => ({\n  type: TOGGLE_FOLLOW,\n  userID\n});\nexport const setUsers = users => ({\n  type: SET_USERS,\n  users\n});\nexport const setUsersTotalCount = totalCount => ({\n  type: SET_USERS_TOTAL_COUNT,\n  totalCount\n});\nexport const setUserListCurrentPage = pageNumber => ({\n  type: SET_USERLIST_CURRENT_PAGE,\n  pageNumber\n});\nexport const showPreloader = isShow => ({\n  type: SHOW_PRELOADER,\n  isShow\n});\nexport const toggleDisabledFollowingButton = (isDisabled, userId) => ({\n  type: TOGGLE_DISABLED_FOLLOWING_BUTTON,\n  isDisabled,\n  userId\n});\nexport const getUserListThunkCreator = (userListCurrentPage, userListPageSize) => {\n  return dispatch => {\n    dispatch(setUserListCurrentPage(userListCurrentPage));\n    dispatch(showPreloader(true));\n    usersAPI.getUserListRequest(userListCurrentPage, userListPageSize).then(data => {\n      dispatch(showPreloader(false));\n      dispatch(setUsers(data.items));\n      dispatch(setUsersTotalCount(data.totalCount));\n    });\n  };\n};\nexport const unfollow = userId => {\n  return dispatch => {\n    dispatch(toggleDisabledFollowingButton(true, userId));\n    usersAPI.unfollowRequest(userId).then(data => {\n      if (data.resultCode === 0) {\n        dispatch(onToggleFollowClick(userId));\n      }\n\n      dispatch(toggleDisabledFollowingButton(false, userId));\n    });\n  };\n};\nexport const follow = userId => {\n  return dispatch => {\n    dispatch(toggleDisabledFollowingButton(true, userId));\n    usersAPI.followRequest(userId).then(data => {\n      if (data.resultCode === 0) {\n        dispatch(onToggleFollowClick(userId));\n      }\n\n      dispatch(toggleDisabledFollowingButton(false, userId));\n    });\n  };\n};\nexport default usersReducer;","map":{"version":3,"sources":["/Users/liliia/Downloads/demo-social-network/src/Redux/usersReducer.js"],"names":["usersAPI","TOGGLE_FOLLOW","SET_USERS","SET_USERS_TOTAL_COUNT","SET_USERLIST_CURRENT_PAGE","SHOW_PRELOADER","TOGGLE_DISABLED_FOLLOWING_BUTTON","initialState","users","usersTotalCount","userListPageSize","userListCurrentPage","isShowPreloader","disabledUserListFollowButton","usersReducer","state","action","type","map","u","id","userID","followed","totalCount","pageNumber","isShow","isDisabled","userId","filter","onToggleFollowClick","setUsers","setUsersTotalCount","setUserListCurrentPage","showPreloader","toggleDisabledFollowingButton","getUserListThunkCreator","dispatch","getUserListRequest","then","data","items","unfollow","unfollowRequest","resultCode","follow","followRequest"],"mappings":"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","sourcesContent":["import { usersAPI } from '../api/api';\n\nconst TOGGLE_FOLLOW = 'TOGGLE_FOLLOW';\nconst SET_USERS = 'SET_USERS';\nconst SET_USERS_TOTAL_COUNT = 'SET_USERS_TOTAL_COUNT';\nconst SET_USERLIST_CURRENT_PAGE = 'SET_USERLIST_CURRENT_PAGE';\nconst SHOW_PRELOADER = 'SHOW_PRELOADER';\nconst TOGGLE_DISABLED_FOLLOWING_BUTTON = 'TOGGLE_DISABLED_FOLLOWING_BUTTON';\n\nlet initialState = {\n  users: [],\n  usersTotalCount: 0,\n  userListPageSize: 10,\n  userListCurrentPage: 1,\n  isShowPreloader: false,\n  disabledUserListFollowButton: [],\n}\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n\n    case TOGGLE_FOLLOW:\n      return {\n        ...state,\n        users: state.users.map(u => {\n          if (u.id === action.userID) {\n            return {\n              ...u,\n              followed: !u.followed,\n            }\n          }\n          return u;\n        }),\n      }\n    case SET_USERS:\n      return {\n        ...state,\n        users: action.users, // to render only for new users\n        // users: [...state.users, ...action.users], // to add new users in the end\n      }\n\n    case SET_USERS_TOTAL_COUNT:\n      return {\n        ...state,\n        usersTotalCount: action.totalCount,\n      }\n\n    case SET_USERLIST_CURRENT_PAGE:\n      return {\n        ...state,\n        userListCurrentPage: action.pageNumber,\n      }\n    case SHOW_PRELOADER:\n      return {\n        ...state,\n        isShowPreloader: action.isShow,\n      }\n    case TOGGLE_DISABLED_FOLLOWING_BUTTON:\n      return {\n        ...state,\n        disabledUserListFollowButton: action.isDisabled\n          ? [...state.disabledUserListFollowButton, action.userId]\n          : state.disabledUserListFollowButton.filter(id => id !== action.userId),\n      }\n    default:\n      return state;\n  }\n}\n\nexport const onToggleFollowClick = (userID) => ({ type: TOGGLE_FOLLOW, userID });\nexport const setUsers = (users) => ({ type: SET_USERS, users });\nexport const setUsersTotalCount = (totalCount) => ({ type: SET_USERS_TOTAL_COUNT, totalCount });\nexport const setUserListCurrentPage = (pageNumber) => ({ type: SET_USERLIST_CURRENT_PAGE, pageNumber });\nexport const showPreloader = (isShow) => ({ type: SHOW_PRELOADER, isShow });\nexport const toggleDisabledFollowingButton = (isDisabled, userId) => ({ type: TOGGLE_DISABLED_FOLLOWING_BUTTON, isDisabled, userId });\n\nexport const getUserListThunkCreator = (userListCurrentPage, userListPageSize) => {\n  return (dispatch) => {\n    dispatch(setUserListCurrentPage(userListCurrentPage));\n    dispatch(showPreloader(true));\n    usersAPI.getUserListRequest(userListCurrentPage, userListPageSize)\n      .then(data => {\n        dispatch(showPreloader(false));\n        dispatch(setUsers(data.items));\n        dispatch(setUsersTotalCount(data.totalCount));\n      });\n  }\n};\nexport const unfollow = (userId) => {\n  return (dispatch) => {\n    dispatch(toggleDisabledFollowingButton(true, userId));\n\n    usersAPI.unfollowRequest(userId)\n        .then(data => {\n            if (data.resultCode === 0) {\n              dispatch(onToggleFollowClick(userId));\n            }\n            dispatch(toggleDisabledFollowingButton(false, userId));\n        });\n  }\n};\nexport const follow = (userId) => {\n  return (dispatch) => {\n    dispatch(toggleDisabledFollowingButton(true, userId));\n\n    usersAPI.followRequest(userId)\n        .then(data => {\n            if (data.resultCode === 0) {\n              dispatch(onToggleFollowClick(userId));\n            }\n            dispatch(toggleDisabledFollowingButton(false, userId));\n        });\n  }\n};\n\nexport default usersReducer;\n\n"]},"metadata":{},"sourceType":"module"}
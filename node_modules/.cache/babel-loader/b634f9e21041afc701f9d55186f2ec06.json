{"ast":null,"code":"import _objectSpread from\"/Users/liliia/Downloads/demo-social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{stopSubmit}from'redux-form';import{authMeAPI}from'../api/api';var SET_AUTH_USER_DATA='SET_AUTH_USER_DATA';var SET_AUTH_USER_PROFILE='SET_AUTH_USER_PROFILE';var initialState={id:null,email:null,login:null,isAuth:false,//Header right corner\nauthProfile:null,// main content\nisRememberMe:false};var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_AUTH_USER_DATA://Header right corner\nreturn _objectSpread(_objectSpread({},state),action.payload);case SET_AUTH_USER_PROFILE:{// main content\nreturn _objectSpread(_objectSpread({},state),{},{authProfile:action.authProfile});}default:return state;}};export var setAuthUserData=function setAuthUserData(id,login,email,isAuth){return{type:SET_AUTH_USER_DATA,payload:{id:id,login:login,email:email,isAuth:isAuth}};};export var setAuthUserProfile=function setAuthUserProfile(authProfile){return{type:SET_AUTH_USER_PROFILE,authProfile:authProfile};};export var getAuthUserData=function getAuthUserData(){return function(dispatch){return authMeAPI.authMeRequest().then(function(data){if(data.resultCode===0){var _data$data=data.data,id=_data$data.id,login=_data$data.login,email=_data$data.email;dispatch(setAuthUserData(id,login,email,true));// dispatch(setAuthUserData(data.data)); //It's alternative way for dispatch(setAuthUserData(id, login, email));\n// profileAPI.getProfileRequest(data.data.id)\n//   .then(data => {\n//     dispatch(setAuthUserProfile(data));\n//   });\n}});};};export var authLogIn=function authLogIn(formData){// formData: {email, password, rememberMe}\nreturn function(dispatch){authMeAPI.authLoginRequest(formData).then(function(data){if(data.resultCode===0){dispatch(getAuthUserData());}else{var errorMessage=data.messages.length>0?data.messages[0]:'Common error';dispatch(stopSubmit('login',{_error:errorMessage}));}});};};export var authLogOut=function authLogOut(){return function(dispatch){authMeAPI.authLogOutRequest().then(function(response){if(response.resultCode===0){dispatch(setAuthUserData(null,null,null,false));}});};};export default authReducer;","map":{"version":3,"sources":["/Users/liliia/Downloads/demo-social-network/src/Redux/authReducer.js"],"names":["stopSubmit","authMeAPI","SET_AUTH_USER_DATA","SET_AUTH_USER_PROFILE","initialState","id","email","login","isAuth","authProfile","isRememberMe","authReducer","state","action","type","payload","setAuthUserData","setAuthUserProfile","getAuthUserData","dispatch","authMeRequest","then","data","resultCode","authLogIn","formData","authLoginRequest","errorMessage","messages","length","_error","authLogOut","authLogOutRequest","response"],"mappings":"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","sourcesContent":["import { stopSubmit } from 'redux-form';\nimport { authMeAPI } from '../api/api';\n\nconst SET_AUTH_USER_DATA = 'SET_AUTH_USER_DATA';\nconst SET_AUTH_USER_PROFILE = 'SET_AUTH_USER_PROFILE';\n\nlet initialState = {\n  id: null,\n  email: null,\n  login: null,\n  isAuth: false, //Header right corner\n  authProfile: null,// main content\n  isRememberMe: false,\n}\n\nconst authReducer = (state = initialState, action) => {\n\n  switch (action.type) {\n\n    case SET_AUTH_USER_DATA: //Header right corner\n      return {\n        ...state,\n        ...action.payload,\n      }\n\n    case SET_AUTH_USER_PROFILE: {// main content\n      return {\n        ...state,\n        authProfile: action.authProfile,\n      }\n    }\n\n    \n    default:\n      return state;\n  }\n}\n\nexport const setAuthUserData = (id, login, email, isAuth) => ({ type: SET_AUTH_USER_DATA, payload: {id, login, email,isAuth} });\nexport const setAuthUserProfile = (authProfile) => ({ type: SET_AUTH_USER_PROFILE, authProfile });\n\n\nexport const getAuthUserData = () => (dispatch) => {\n  \n    return authMeAPI.authMeRequest()\n      .then(data => {\n        if (data.resultCode === 0) {\n          let { id, login, email } = data.data;\n          dispatch(setAuthUserData(id, login, email, true));\n          // dispatch(setAuthUserData(data.data)); //It's alternative way for dispatch(setAuthUserData(id, login, email));\n          // profileAPI.getProfileRequest(data.data.id)\n          //   .then(data => {\n          //     dispatch(setAuthUserProfile(data));\n          //   });\n        }\n      });\n  \n};\n\nexport const authLogIn = (formData) => { // formData: {email, password, rememberMe}\n  return (dispatch) => {\n    authMeAPI.authLoginRequest(formData)\n      .then(data => {\n        if (data.resultCode === 0) {\n          dispatch(getAuthUserData());\n        } else {\n          let errorMessage = data.messages.length > 0 ? data.messages[0] : 'Common error';\n          dispatch(stopSubmit('login', {_error: errorMessage}));\n        }\n      });\n  }\n}\n\nexport const authLogOut = () => {\n  return (dispatch) => {\n    authMeAPI.authLogOutRequest()\n      .then(response => {\n        if (response.resultCode === 0) {\n          dispatch(setAuthUserData(null,null,null,false));\n        }\n      })\n  }\n}\n\nexport default authReducer;\n\n"]},"metadata":{},"sourceType":"module"}